# DOCUMIND AI - COMPLETE PROJECT SPECIFICATION FOR CLAUDE CODE

## üéØ PROJECT OVERVIEW
You are building DocuMind AI, a production SaaS application that transforms static documents (PDFs, images) into intelligent, fillable, editable workspaces with AI-powered chat capabilities.

## üîë CORE VALUE PROPOSITION
Users can:
1. Upload any document (PDF, image, scan)
2. Automatically detect and fill form fields
3. Click anywhere to add text, signatures, checkboxes
4. Edit and annotate documents directly in browser
5. Chat with AI about document content
6. Export filled/edited versions
7. Track version history

## üìã COMPLETE FEATURE LIST

### FEATURE 1: Document Upload & Storage
- **Functionality**: Drag-and-drop or click to upload PDFs, images (PNG/JPG), DOCX
- **Technical**: Files upload to Supabase Storage bucket 'documents'
- **Validation**: Max 10MB, file type checking
- **Database**: Create record in 'documents' table with metadata
- **UI**: Upload zone with progress bar, file preview grid

### FEATURE 2: OCR & Form Detection
- **Functionality**: Extract text and detect form fields from any document
- **Technical**: Use Google Document AI processors
- **Pipeline**:
  1. Send document to GCP Document AI OCR processor
  2. Extract text with formatting preserved
  3. Detect form fields with exact coordinates
  4. Identify tables and structure them as JSON
  5. Extract entities (names, dates, amounts)
- **Storage**: Save extracted data in 'document_extractions' table
- **Form Fields**: Store in 'document_form_fields' with coordinates

### FEATURE 3: Interactive Document Editor
- **Functionality**: Click on document to add/edit content
- **Components**:
  - PDF viewer as base layer (react-pdf)
  - Form field overlay at detected coordinates
  - Click-to-add text anywhere
  - Signature pad with drawing
  - Checkbox/radio button tools
  - Highlight and annotation tools
- **Technical**:
  - Convert PDF coordinates to screen coordinates
  - Render HTML inputs as overlays
  - Auto-save every change to 'document_versions'
  - Track edit history with version numbers

### FEATURE 4: Form Filling System
- **Functionality**: Auto-detect and fill form fields
- **Field Types**:
  - Text inputs (name, address, etc.)
  - Checkboxes (single and groups)
  - Radio buttons (exclusive selection)
  - Date pickers
  - Dropdowns
  - Signature fields
- **Interaction**:
  - Click detected field ‚Üí Show appropriate input
  - Tab navigation between fields
  - Validation rules per field type
  - Auto-save field values

### FEATURE 5: AI Chat with RAG
- **Functionality**: Ask questions about document content
- **Technical**:
  1. Chunk document text (1000 chars, 200 overlap)
  2. Generate OpenAI embeddings for chunks
  3. Store in Supabase pgvector
  4. On question: embed query, find similar chunks
  5. Build context, send to GPT-4
  6. Stream response with citations
- **Features**:
  - Citation links to document pages
  - Highlight relevant sections
  - Export conversation as PDF

### FEATURE 6: Document Export
- **Functionality**: Export edited/filled document
- **Technical**:
  1. Load original PDF with pdf-lib
  2. Apply all edits from database
  3. Add text at saved coordinates
  4. Insert signatures as images
  5. Add checkmarks and form values
  6. Generate new PDF buffer
- **Formats**: PDF, Word (via conversion)

### FEATURE 7: Version Control
- **Functionality**: Track all document edits
- **Features**:
  - Save versions automatically
  - Compare versions
  - Restore previous versions
  - See edit history
- **Storage**: 'document_versions' table

### FEATURE 8: User Authentication
- **Methods**: Email/password, Google OAuth, GitHub OAuth
- **Provider**: Supabase Auth
- **Features**:
  - Email verification
  - Password reset
  - Session management
  - Protected routes

### FEATURE 9: Subscription Billing
- **Provider**: Stripe
- **Tiers**:
  - Free: 5 documents/month
  - Pro ($29): 100 documents/month
  - Enterprise ($99): Unlimited
- **Features**:
  - Stripe Checkout
  - Subscription management
  - Usage tracking
  - Invoice history

### FEATURE 10: Analytics Dashboard
- **Metrics**:
  - Documents processed
  - Usage by type
  - Chat interactions
  - Processing success rate
- **Visualizations**: Charts with Recharts
- **Export**: CSV download

## üèóÔ∏è TECHNICAL ARCHITECTURE

### Frontend Stack
- **Framework**: Next.js 14 with App Router
- **Language**: TypeScript (strict mode)
- **Styling**: Tailwind CSS + shadcn/ui components
- **State Management**: Zustand for global state
- **Data Fetching**: TanStack Query (React Query)
- **Forms**: React Hook Form + Zod validation
- **PDF Handling**: react-pdf (viewing), pdf-lib (editing)
- **Charts**: Recharts
- **Animations**: Framer Motion

### Backend Stack
- **API**: Next.js Route Handlers
- **Edge Functions**: Vercel Edge Runtime
- **Database**: Supabase (PostgreSQL)
- **Vector Store**: Supabase pgvector extension
- **File Storage**: Supabase Storage
- **Background Jobs**: Vercel Cron

### AI/ML Services
- **OCR**: Google Document AI
  - OCR Processor (text extraction)
  - Form Parser (field detection)
  - Entity Extractor (data extraction)
  - Table Parser (table extraction)
- **LLM**: OpenAI GPT-4 Turbo
- **Embeddings**: OpenAI text-embedding-3-small
- **Orchestration**: LangChain

### External Services
- **Authentication**: Supabase Auth
- **Payments**: Stripe
- **Deployment**: Vercel
- **Monitoring**: Vercel Analytics
- **Error Tracking**: Console logs (Sentry optional)

## üìÅ EXACT PROJECT STRUCTURE